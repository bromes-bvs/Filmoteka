{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,oDA2EAC,EAAAC,QAAQC,iBAAiB,UApElBC,eAAsCC,GAC3CA,EAAEC,iBACF,IAAIC,EAAQF,EAAEG,OAAOC,SAAS,gBAAgBC,MAAMC,OAGpD,GAFAV,EAAAW,WAAWC,UAAY,IAElBN,EAAMO,OAAQ,CACjBb,EAAAc,UAAUC,YACR,2EACF,MAAMC,QAAEA,SAAkB,EAAAlB,EAAAmB,kBAAiB,GAC3CC,EAAAC,QAAQC,UACR,EAAAC,EAAAC,QAAON,GACPE,EAAAC,QAAQI,QACV,CAEA,MAAMC,QAAiB,EAAA1B,EAAA2B,iBAAgBnB,IAC/BU,QAAAU,EAAOC,YAAEA,GAAgBH,EAMjC,GALAN,EAAAC,QAAQC,SACRpB,EAAAc,UAAUC,YAAc,IACxB,EAAAM,EAAAC,QAAOI,GACPR,EAAAC,QAAQI,UAEHG,EAAQb,OAAQ,CACnBb,EAAAc,UAAUC,YACR,4EACF,MAAQC,QAAAY,SAAkB,EAAA9B,EAAAmB,kBAAiB,GAC3CC,EAAAC,QAAQC,UACR,EAAAC,EAAAC,QAAOM,GACPV,EAAAC,QAAQI,QACV,CAEmB,IAAIM,EAAAC,GAAJ,CAAe9B,EAAA+B,UAAW,CAC3CC,WAAYL,EAAc,IAAM,IAAMA,EACtCM,aAAc,EACdC,aAAc,EACdC,aAAa,EACbC,KAAM,EACNC,SAAU,CACRD,KAAM,gDACNE,YACE,iEACFC,WACE,mGAGFC,mBACE,gHAGFC,WACE,4GAMKC,GAAG,aAAavC,MAAMwC,IAC/B,IAAIL,EAAcK,EAAMP,KACxB,MAAMpB,QAAEA,SAAkB,EAAAlB,EAAA2B,iBAAgBnB,EAAOgC,GACjDpB,EAAAC,QAAQC,UACR,EAAAC,EAAAC,QAAON,GACPE,EAAAC,QAAQI,SACRqB,OAAOC,SAAS,CACdC,IAAK,EACLC,SAAU,UACZ,GAEJ","sources":["src/scripts/header.js"],"sourcesContent":["import { fetchPopularFilm, fetchSearchFilm } from './fetch';\nimport { render } from './gallery';\nimport { container, formRef, galleryRef, notifyRef } from './refs';\nimport { Loading } from 'notiflix';\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\n\nexport async function handleSearchFormSubmit(e) {\n  e.preventDefault();\n  let query = e.target.elements['search-input'].value.trim();\n  galleryRef.innerHTML = '';\n\n  if (!query.length) {\n    notifyRef.textContent =\n      'Search result not successful. Enter the correct movie name and try again';\n    const { results } = await fetchPopularFilm(1);\n    Loading.arrows();\n    render(results);\n    Loading.remove();\n  }\n\n  const response = await fetchSearchFilm(query);\n  const { results, total_pages } = response;\n  Loading.arrows();\n  notifyRef.textContent = '';\n  render(results);\n  Loading.remove();\n\n  if (!results.length) {\n    notifyRef.textContent =\n      ' Search result not successful. Enter the correct movie name and try again';\n    const { results } = await fetchPopularFilm(1);\n    Loading.arrows();\n    render(results);\n    Loading.remove();\n  }\n\n  const instance_2 = new Pagination(container, {\n    totalItems: total_pages > 500 ? 500 : total_pages,\n    itemsPerPage: 1,\n    visiblePages: 5,\n    centerAlign: true,\n    page: 1,\n    template: {\n      page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n      currentPage:\n        '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n      moveButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</a>',\n      disabledMoveButton:\n        '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</span>',\n      moreButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n        '<span class=\"tui-ico-ellip dots\">...</span>' +\n        '</a>',\n    },\n  });\n\n  instance_2.on('afterMove', async event => {\n    let currentPage = event.page;\n    const { results } = await fetchSearchFilm(query, currentPage);\n    Loading.arrows();\n    render(results);\n    Loading.remove();\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth',\n    });\n  });\n}\n\nformRef.addEventListener('submit', handleSearchFormSubmit);\n"],"names":["$ncrjo","parcelRequire","$1O3u4","formRef","addEventListener","async","e","preventDefault","query","target","elements","value","trim","galleryRef","innerHTML","length","notifyRef","textContent","results","fetchPopularFilm","$eWCmQ","Loading","arrows","$2zNys","render","remove","response","fetchSearchFilm","results1","total_pages","results2","$parcel$interopDefault","$fb9GJ","container","totalItems","itemsPerPage","visiblePages","centerAlign","page","template","currentPage","moveButton","disabledMoveButton","moreButton","on","event","window","scrollTo","top","behavior"],"version":3,"file":"index.f5863e1b.js.map"}