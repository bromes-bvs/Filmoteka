{"mappings":"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","sources":["src/scripts/js-modal.js","src/scripts/renderModal.js"],"sourcesContent":["import { galleryRef, containerElem, closeModalBtn, modal } from './refs';\nimport { fetchMovie, fetchTrailerFilm } from './fetch';\nimport renderModal from './renderModal';\n\nconst LOCAL_STORAGE_WATCH_KEY = 'watch';\nconst LOCAL_STORAGE_QUEUE_KEY = 'queue';\nconst QUEUE_LIST_TYPE = 'QUEUE';\nconst WATCH_LIST_TYPE = 'WATCHED';\nlet searchId;\n\ncloseModalBtn.addEventListener('click', closeModal);\n\nfunction openModal() {\n  modal.classList.remove('is-hidden-modal');\n  document.body.classList.add('stop-scroll');\n  window.addEventListener('click', handleClickOnBackdrop);\n  window.addEventListener('keydown', handleKeyPress);\n\n  const addWatchBtn = document.querySelector('.film__button-add-to-watch');\n  const addQueueBtn = document.querySelector('.film__button-add-to-queue');\n  const trailerBtn = document.querySelector('.film__button-trailer');\n\n  const isAddToWatch = isAdded(LOCAL_STORAGE_WATCH_KEY, searchId);\n  const isAddToQueue = isAdded(LOCAL_STORAGE_QUEUE_KEY, searchId);\n\n  trailerBtn.addEventListener('click', handleBtnTrailerClick);\n\n  if (isAddToWatch) {\n    renderBtnAppearance(addWatchBtn, WATCH_LIST_TYPE, true);\n    addWatchBtn.addEventListener('click', handleRemoveWatch);\n  } else {\n    renderBtnAppearance(addWatchBtn, WATCH_LIST_TYPE, false);\n    addWatchBtn.addEventListener('click', handleWatchClick);\n  }\n  if (isAddToQueue) {\n    renderBtnAppearance(addQueueBtn, QUEUE_LIST_TYPE, true);\n    addQueueBtn.addEventListener('click', handleRemoveQueue);\n  } else {\n    renderBtnAppearance(addQueueBtn, QUEUE_LIST_TYPE, false);\n    addQueueBtn.addEventListener('click', handleQueueClick);\n  }\n}\n\nfunction closeModal() {\n  modal.classList.add('is-hidden-modal');\n  document.body.classList.remove('stop-scroll');\n  window.removeEventListener('click', handleClickOnBackdrop);\n  window.removeEventListener('keydown', handleKeyPress);\n\n  const addWatchBtn = document.querySelector('.film__button-add-to-watch');\n  const addQueueBtn = document.querySelector('.film__button-add-to-queue');\n  addWatchBtn.removeEventListener('click', handleWatchClick);\n  addQueueBtn.removeEventListener('click', handleQueueClick);\n\n  containerElem.innerHTML = '';\n}\n\nfunction handleKeyPress(e) {\n  console.log(e.key);\n  if (e.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction handleClickOnBackdrop(e) {\n  if (e.target === modal) {\n    closeModal();\n  }\n}\n\ngalleryRef.addEventListener('click', handleFilmClick);\n\nasync function handleFilmClick(e) {\n  if (!e.target.closest('li')) {\n    return;\n  }\n  if (e.target.closest('li')) {\n    const id = e.target.closest('li').dataset.id;\n    searchId = id;\n    await fetchMovie(id).then(data => renderModal(data));\n    openModal();\n  }\n}\n\nfunction handleWatchClick(e) {\n  updateLocalStorageList(e, LOCAL_STORAGE_WATCH_KEY, WATCH_LIST_TYPE);\n  e.target.removeEventListener('click', handleWatchClick);\n  e.target.addEventListener('click', handleRemoveWatch);\n}\n\nfunction handleQueueClick(e) {\n  updateLocalStorageList(e, LOCAL_STORAGE_QUEUE_KEY, QUEUE_LIST_TYPE);\n  e.target.removeEventListener('click', handleQueueClick);\n  e.target.addEventListener('click', handleRemoveQueue);\n}\n\nfunction handleRemoveWatch(e) {\n  removeFromLocalStorage(e, LOCAL_STORAGE_WATCH_KEY, WATCH_LIST_TYPE);\n  e.target.removeEventListener('click', handleRemoveWatch);\n  e.target.addEventListener('click', handleWatchClick);\n}\n\nfunction handleRemoveQueue(e) {\n  removeFromLocalStorage(e, LOCAL_STORAGE_QUEUE_KEY, QUEUE_LIST_TYPE);\n  e.target.removeEventListener('click', handleRemoveQueue);\n  e.target.addEventListener('click', handleQueueClick);\n}\n\nfunction updateLocalStorageList(event, key, listType) {\n  const id = searchId;\n  const loadAddedList = localStorage.getItem(key);\n  const parsedIdList = JSON.parse(loadAddedList);\n  const renderBtn = event.target;\n\n  if (!loadAddedList) {\n    const watchSetting = [id];\n    setToLocalStorage(watchSetting, key);\n    renderBtnAppearance(renderBtn, listType, true);\n  }\n  if (loadAddedList) {\n    parsedIdList.push(searchId);\n    setToLocalStorage(parsedIdList, key);\n    renderBtnAppearance(renderBtn, listType, true);\n  }\n}\n\nfunction setToLocalStorage(idArray, key) {\n  localStorage.setItem(key, JSON.stringify(idArray));\n}\n\nfunction isAdded(key, id) {\n  const idArray = JSON.parse(localStorage.getItem(key));\n  const isAdd = idArray ? idArray.find(value => value === id) : false;\n  return isAdd;\n}\n\nfunction renderBtnAppearance(button, type, isActive) {\n  if (isActive) {\n    button.classList.add('film__button--already-in-list');\n    button.textContent = `REMOVE FROM ${type} LIST`;\n  } else {\n    button.classList.remove('film__button--already-in-list');\n    button.textContent = `ADD TO ${type}`;\n  }\n}\n\nfunction removeFromLocalStorage(event, key, listType) {\n  const findeId = searchId;\n  const renderBtn = event.target;\n  const includesId = JSON.parse(localStorage.getItem(key));\n  const updateId = includesId.filter(id => id !== findeId);\n  setToLocalStorage(updateId, key);\n  renderBtnAppearance(renderBtn, listType, false);\n}\n\nfunction handleBtnTrailerClick(e) {\n  const placeContainerElem = document.querySelector('.film__trailer-place');\n  const id = searchId;\n  fetchTrailerFilm(id).then(({ results }) => {\n    let key = results[0].key;\n    placeContainerElem.innerHTML = `<iframe class =\"film__trailer\" src=\"https://www.youtube.com/embed/${key}\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>`;\n  });\n  e.target.setAttribute('disabled', true);\n}\n","import { containerElem } from './refs';\n\nfunction renderModal({\n  title,\n  vote_average,\n  vote_count,\n  popularity,\n\n  original_title,\n  genres,\n  overview,\n  poster_path,\n}) {\n  const ganresMarkup = genres\n    .map(genre => {\n      return genre.name;\n    })\n    .join(', ');\n  const markup = `<div class =\"film__content-wrapper\"><img class=\"film__poster\" src=\"https://image.tmdb.org/t/p/original/${poster_path}\" alt=\"Poster to film ${original_title}\" />\n          <div class=\"film__content-wrapper--main\">\n            <h1 class=\"film__title\">${title.toUpperCase()}</h1>\n            <ul class=\"film__properties-list\">\n              <li class=\"film__properties-item\">\n                <p class=\"film__propertie-name\">Vote/Votes</p>\n                <span class=\"film__vote-text\">${vote_average.toFixed(1)}</span>\n                <p class=\"film__propertie-name--slesh\">/</p>\n                <span class=\"film__votes-text\">${vote_count}</span>\n              </li>\n              <li class=\"film__properties-item\">\n                <p class=\"film__propertie-name\">Popularity</p>\n                <span class=\"film__popularity-text\">${popularity.toFixed(\n                  2\n                )}</span>\n              </li>\n              <li class=\"film__properties-item\">\n                <p class=\"film__propertie-name\">Original Title</p>\n                <span class=\"film__original-text\">${original_title.toUpperCase()}</span>\n              </li>\n              <li class=\"film__properties-item\">\n                <p class=\"film__propertie-name\">Genre</p>\n                <span class=\"film__genre-text\">${ganresMarkup}</span>\n              </li>\n            </ul>\n            <h2 class=\"film__about\">ABOUT</h2>\n            <p class=\"film__about-text\">${overview}</p><button class=\"film__button-add-to-watch\" type=\"button\">\n            ADD TO WATCHED\n          </button>\n          <button class=\"film__button-add-to-queue\" type=\"button\">\n            ADD TO QUEUE\n          </button> <button class=\"film__button-trailer\" type=\"button\">\n            WATCH TRAILER<span class=\"youtube-icon\"></span>\n          </button></div></div><div class=\"film__trailer-place\"></div>`;\n\n  containerElem.insertAdjacentHTML('afterbegin', markup);\n}\n\nexport default renderModal;\n"],"names":["$7Sf3J","parcelRequire","$cfdcc98733786801$export$2e2bcd8739ae039","title","vote_average","vote_count","popularity","original_title","genres","overview","poster_path","ganresMarkup","map","genre","name","join","markup","toUpperCase","toFixed","containerElem","insertAdjacentHTML","$46b01bde8f079f49$var$LOCAL_STORAGE_WATCH_KEY","$46b01bde8f079f49$var$LOCAL_STORAGE_QUEUE_KEY","$46b01bde8f079f49$var$QUEUE_LIST_TYPE","$46b01bde8f079f49$var$WATCH_LIST_TYPE","$46b01bde8f079f49$var$searchId","$46b01bde8f079f49$var$closeModal","modal","classList","add","document","body","remove","window","removeEventListener","$46b01bde8f079f49$var$handleClickOnBackdrop","$46b01bde8f079f49$var$handleKeyPress","addWatchBtn","querySelector","addQueueBtn","$46b01bde8f079f49$var$handleWatchClick","$46b01bde8f079f49$var$handleQueueClick","innerHTML","e","console","log","key","target","$46b01bde8f079f49$var$updateLocalStorageList","addEventListener","$46b01bde8f079f49$var$handleRemoveWatch","$46b01bde8f079f49$var$handleRemoveQueue","$46b01bde8f079f49$var$removeFromLocalStorage","event","listType","id","loadAddedList","localStorage","getItem","parsedIdList","JSON","parse","renderBtn","$46b01bde8f079f49$var$setToLocalStorage","$46b01bde8f079f49$var$renderBtnAppearance","push","idArray","setItem","stringify","$46b01bde8f079f49$var$isAdded","find","value","button","type","isActive","textContent","findeId","filter","$46b01bde8f079f49$var$handleBtnTrailerClick","placeContainerElem","$l4BJK","fetchTrailerFilm","then","results","setAttribute","closeModalBtn","galleryRef","async","closest","dataset","fetchMovie","data","trailerBtn","isAddToWatch","isAddToQueue","$46b01bde8f079f49$var$openModal"],"version":3,"file":"index.0cb0ad7b.js.map"}