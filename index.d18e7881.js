var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},i=e.parcelRequired76b;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in n){var i=n[e];delete n[e];var l={id:e,exports:{}};return t[e]=l,i.call(l.exports,l,l.exports),l.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequired76b=i);var l=i("1O3u4"),o=i("ncrjo");l=i("1O3u4");var r=function({title:e,vote_average:t,vote_count:n,popularity:i,original_title:o,genres:r,overview:a,poster_path:s}){const c=r.map((e=>e.name)).join(", "),d=`<div class ="film__content-wrapper"><img class="film__poster" src="https://image.tmdb.org/t/p/original/${s}" alt="Poster to film ${o}" />\n          <div class="film__content-wrapper--main">\n            <h1 class="film__title">${e.toUpperCase()}</h1>\n            <ul class="film__properties-list">\n              <li class="film__properties-item">\n                <p class="film__propertie-name">Vote/Votes</p>\n                <span class="film__vote-text">${t.toFixed(1)}</span>\n                <p class="film__propertie-name--slesh">/</p>\n                <span class="film__votes-text">${n}</span>\n              </li>\n              <li class="film__properties-item">\n                <p class="film__propertie-name">Popularity</p>\n                <span class="film__popularity-text">${i.toFixed(2)}</span>\n              </li>\n              <li class="film__properties-item">\n                <p class="film__propertie-name">Original Title</p>\n                <span class="film__original-text">${o.toUpperCase()}</span>\n              </li>\n              <li class="film__properties-item">\n                <p class="film__propertie-name">Genre</p>\n                <span class="film__genre-text">${c}</span>\n              </li>\n            </ul>\n            <h2 class="film__about">ABOUT</h2>\n            <p class="film__about-text">${a}</p><button class="film__button-add-to-watch" type="button">\n            ADD TO WATCHED\n          </button>\n          <button class="film__button-add-to-queue" type="button">\n            ADD TO QUEUE\n          </button> <button class="film__button-trailer" type="button">\n            WATCH TRAILER<span class="youtube-icon"></span>\n          </button></div></div><div class="film__trailer-place"></div>`;l.containerElem.insertAdjacentHTML("afterbegin",d)};let a;function s(){l.modal.classList.add("is-hidden-modal"),document.body.classList.remove("stop-scroll"),window.removeEventListener("click",d),window.removeEventListener("keydown",c);const e=document.querySelector(".film__button-add-to-watch"),t=document.querySelector(".film__button-add-to-queue");e.removeEventListener("click",u),t.removeEventListener("click",p),l.containerElem.innerHTML=""}function c(e){console.log(e.key),"Escape"===e.key&&s()}function d(e){e.target===l.modal&&s()}function u(e){_(e,"watch","WATCHED"),e.target.removeEventListener("click",u),e.target.addEventListener("click",m)}function p(e){_(e,"queue","QUEUE"),e.target.removeEventListener("click",p),e.target.addEventListener("click",f)}function m(e){b(e,"watch","WATCHED"),e.target.removeEventListener("click",m),e.target.addEventListener("click",u)}function f(e){b(e,"queue","QUEUE"),e.target.removeEventListener("click",f),e.target.addEventListener("click",p)}function _(e,t,n){const i=a,l=localStorage.getItem(t),o=JSON.parse(l),r=e.target;if(!l){v([i],t),g(r,n,!0)}l&&(o.push(a),v(o,t),g(r,n,!0))}function v(e,t){localStorage.setItem(t,JSON.stringify(e))}function E(e,t){const n=JSON.parse(localStorage.getItem(e));return!!n&&n.find((e=>e===t))}function g(e,t,n){n?(e.classList.add("film__button--already-in-list"),e.textContent=`REMOVE FROM ${t} LIST`):(e.classList.remove("film__button--already-in-list"),e.textContent=`ADD TO ${t}`)}function b(e,t,n){const i=a,l=e.target;v(JSON.parse(localStorage.getItem(t)).filter((e=>e!==i)),t),g(l,n,!1)}function y(e){const t=document.querySelector(".film__trailer-place"),n=a;(0,o.fetchTrailerFilm)(n).then((({results:e})=>{let n=e[0].key;t.innerHTML=`<iframe class ="film__trailer" src="https://www.youtube.com/embed/${n}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`})),e.target.setAttribute("disabled",!0)}l.closeModalBtn.addEventListener("click",s),l.galleryRef.addEventListener("click",(async function(e){if(!e.target.closest("li"))return;if(e.target.closest("li")){const t=e.target.closest("li").dataset.id;a=t,await(0,o.fetchMovie)(t).then((e=>r(e))),function(){l.modal.classList.remove("is-hidden-modal"),document.body.classList.add("stop-scroll"),window.addEventListener("click",d),window.addEventListener("keydown",c);const e=document.querySelector(".film__button-add-to-watch"),t=document.querySelector(".film__button-add-to-queue"),n=document.querySelector(".film__button-trailer"),i=E("watch",a),o=E("queue",a);n.addEventListener("click",y),i?(g(e,"WATCHED",!0),e.addEventListener("click",m)):(g(e,"WATCHED",!1),e.addEventListener("click",u)),o?(g(t,"QUEUE",!0),t.addEventListener("click",f)):(g(t,"QUEUE",!1),t.addEventListener("click",p))}()}}));
//# sourceMappingURL=index.d18e7881.js.map
