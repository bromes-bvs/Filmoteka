!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},i=e.parcelRequired76b;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in n){var i=n[e];delete n[e];var l={id:e,exports:{}};return t[e]=l,i.call(l.exports,l,l.exports),l.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequired76b=i);var l=i("7Sf3J"),o=i("l4BJK");l=i("7Sf3J");var r=function({title:e,vote_average:t,vote_count:n,popularity:i,original_title:o,genres:r,overview:a,poster_path:s}){const c=r.map((e=>e.name)).join(", "),d=`<div class ="film__content-wrapper"><img class="film__poster" src="https://image.tmdb.org/t/p/original/${s}" alt="Poster to film ${o}" />\n          <div class="film__content-wrapper--main">\n            <h1 class="film__title">${e.toUpperCase()}</h1>\n            <ul class="film__properties-list">\n              <li class="film__properties-item">\n                <p class="film__propertie-name">Vote/Votes</p>\n                <span class="film__vote-text">${t.toFixed(1)}</span>\n                <p class="film__propertie-name--slesh">/</p>\n                <span class="film__votes-text">${n}</span>\n              </li>\n              <li class="film__properties-item">\n                <p class="film__propertie-name">Popularity</p>\n                <span class="film__popularity-text">${i.toFixed(2)}</span>\n              </li>\n              <li class="film__properties-item">\n                <p class="film__propertie-name">Original Title</p>\n                <span class="film__original-text">${o.toUpperCase()}</span>\n              </li>\n              <li class="film__properties-item">\n                <p class="film__propertie-name">Genre</p>\n                <span class="film__genre-text">${c}</span>\n              </li>\n            </ul>\n            <h2 class="film__about">ABOUT</h2>\n            <p class="film__about-text">${a}</p><button class="film__button-add-to-watch" type="button">\n            ADD TO WATCHED\n          </button>\n          <button class="film__button-add-to-queue" type="button">\n            ADD TO QUEUE\n          </button> <button class="film__button-trailer" type="button">\n            WATCH TRAILER<span class="youtube-icon"></span>\n          </button></div></div><div class="film__trailer-place"></div>`;l.containerElem.insertAdjacentHTML("afterbegin",d)};const a="watch",s="queue",c="QUEUE",d="WATCHED";let p;function u(){l.modal.classList.add("is-hidden-modal"),document.body.classList.remove("stop-scroll"),window.removeEventListener("click",f),window.removeEventListener("keydown",m);const e=document.querySelector(".film__button-add-to-watch"),t=document.querySelector(".film__button-add-to-queue");e.removeEventListener("click",_),t.removeEventListener("click",v),l.containerElem.innerHTML=""}function m(e){console.log(e.key),"Escape"===e.key&&u()}function f(e){e.target===l.modal&&u()}function _(e){E(e,a,d),e.target.removeEventListener("click",_),e.target.addEventListener("click",g)}function v(e){E(e,s,c),e.target.removeEventListener("click",v),e.target.addEventListener("click",b)}function g(e){k(e,a,d),e.target.removeEventListener("click",g),e.target.addEventListener("click",_)}function b(e){k(e,s,c),e.target.removeEventListener("click",b),e.target.addEventListener("click",v)}function E(e,t,n){const i=p,l=localStorage.getItem(t),o=JSON.parse(l),r=e.target;if(!l){y([i],t),w(r,n,!0)}l&&(o.push(p),y(o,t),w(r,n,!0))}function y(e,t){localStorage.setItem(t,JSON.stringify(e))}function L(e,t){const n=JSON.parse(localStorage.getItem(e));return!!n&&n.find((e=>e===t))}function w(e,t,n){n?(e.classList.add("film__button--already-in-list"),e.textContent=`REMOVE FROM ${t} LIST`):(e.classList.remove("film__button--already-in-list"),e.textContent=`ADD TO ${t}`)}function k(e,t,n){const i=p,l=e.target;y(JSON.parse(localStorage.getItem(t)).filter((e=>e!==i)),t),w(l,n,!1)}function h(e){const t=document.querySelector(".film__trailer-place"),n=p;(0,o.fetchTrailerFilm)(n).then((({results:e})=>{let n=e[0].key;t.innerHTML=`<iframe class ="film__trailer" src="https://www.youtube.com/embed/${n}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`})),e.target.setAttribute("disabled",!0)}l.closeModalBtn.addEventListener("click",u),l.galleryRef.addEventListener("click",(async function(e){if(!e.target.closest("li"))return;if(e.target.closest("li")){const t=e.target.closest("li").dataset.id;p=t,await(0,o.fetchMovie)(t).then((e=>r(e))),function(){l.modal.classList.remove("is-hidden-modal"),document.body.classList.add("stop-scroll"),window.addEventListener("click",f),window.addEventListener("keydown",m);const e=document.querySelector(".film__button-add-to-watch"),t=document.querySelector(".film__button-add-to-queue"),n=document.querySelector(".film__button-trailer"),i=L(a,p),o=L(s,p);n.addEventListener("click",h),i?(w(e,d,!0),e.addEventListener("click",g)):(w(e,d,!1),e.addEventListener("click",_)),o?(w(t,c,!0),t.addEventListener("click",b)):(w(t,c,!1),t.addEventListener("click",v))}()}}))}();
//# sourceMappingURL=index.0cb0ad7b.js.map
