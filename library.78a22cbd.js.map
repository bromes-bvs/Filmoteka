{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-adeae715f909e355.js","src/scripts/libraryBtnActive.js","src/scripts/storage.js","node_modules/@parcel/runtime-js/lib/runtime-1567e21b415e53af.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"9zafZ\\\":\\\"library.78a22cbd.js\\\",\\\"hyIe0\\\":\\\"empty-collection-min.be2b13eb.png\\\",\\\"7mVsD\\\":\\\"index.2b5100b0.css\\\",\\\"jF3vp\\\":\\\"index.25b5f903.js\\\"}\"));","import { fetchMovie } from './fetch';\nimport { findGenres, render } from './gallery';\nimport { prepareGalleryInfo, renderFilmList } from './renderFilmList';\nimport { loadFromLS } from './storage.js';\nimport { galleryRef } from './refs';\n\nconst watchedBtn = document.querySelector('[data-id=\"watched-btn\"]');\nconst queueBtn = document.querySelector('[data-id=\"queue-btn\"]');\nconst watchedSet = document.querySelector('.library-buttons__wrapper');\n\nwatchedSet.addEventListener('click', makeActiveBtn);\n\nfunction makeActiveBtn(e) {\n  if (e.target.classList.contains('is-active')) {\n    return;\n  }\n  watchedBtn.classList.toggle('is-active');\n  queueBtn.classList.toggle('is-active');\n  return;\n}\n\n//============= повідомлення при порожній колекції ===============\nconst noImgCollectionUrl = new URL(\n  '../images/gallery/empty-collection-min.png',\n  import.meta.url\n);\n\nfunction emptyCollectionMarkup() {\n  const markupcollection =\n    `<li><img class=\"empty-collection-img\" width=\"240\" src=${noImgCollectionUrl.pathname}></li><li><p class=\"empty-collection-text\">Collection is empty. You need to add a movie.</p></li>`;\n    galleryRef.innerHTML = markupcollection;\n    galleryRef.classList.add('empty-gallery');\n}\n\n//============= Кнопка Watched ====================================\nconst LOCALSTORAGE_KEY_WATCHED = 'watch';\n\nonWatchedBtnClick();\n\nfunction onWatchedBtnClick() {\n  galleryRef.innerHTML = '';\n  if (!localStorage[LOCALSTORAGE_KEY_WATCHED]) {\n    emptyCollectionMarkup();\n    return;\n  }\n \n  if (localStorage[LOCALSTORAGE_KEY_WATCHED]) {\n    const arrayFromLSWatch = loadFromLS(LOCALSTORAGE_KEY_WATCHED);\n    if (arrayFromLSWatch.length === 0) {\n      emptyCollectionMarkup();\n      return;\n    }\n    if (galleryRef.classList.contains('empty-gallery')) {\n      galleryRef.classList.remove('empty-gallery');\n    }\n    const filmPromisesWatch = arrayFromLSWatch.map(id => fetchMovie(id));\n\n    Promise.all(filmPromisesWatch).then(results => {\n      const markup = results\n        .map(\n          ({\n            poster_path,\n            backdrop_path,\n            original_title,\n            title,\n            genres,\n            release_date,\n            vote_average,\n            id,\n          }) => {\n            const genres_ids = genres.map(genre => genre.id);\n            return prepareGalleryInfo(\n              poster_path,\n              backdrop_path,\n              original_title,\n              title,\n              genres_ids,\n              release_date,\n              vote_average,\n              id,\n              findGenres\n            );\n          }\n        )\n        .join('');\n      galleryRef.innerHTML = markup;\n    });\n  }\n}\n\nwatchedBtn.addEventListener('click', onWatchedBtnClick);\n\n//============= Кнопка Queue ====================================\nconst LOCALSTORAGE_KEY_QUEUE = 'queue';\n\nfunction onQueueBtnClick() {\n  galleryRef.innerHTML = '';\n  if (!localStorage[LOCALSTORAGE_KEY_QUEUE]) {\n    emptyCollectionMarkup();\n    return;\n  }\n  if (localStorage[LOCALSTORAGE_KEY_QUEUE]) {\n    const arrayFromLSQueue = loadFromLS(LOCALSTORAGE_KEY_QUEUE);\n    if (arrayFromLSQueue.length === 0) {\n      emptyCollectionMarkup();\n      return;\n    }\n    if (galleryRef.classList.contains('empty-gallery')) {\n      galleryRef.classList.remove('empty-gallery');\n    }\n    const filmPromisesQueue = arrayFromLSQueue.map(id => fetchMovie(id));\n\n    Promise.all(filmPromisesQueue).then(results => {\n      const markup = results\n        .map(\n          ({\n            poster_path,\n            backdrop_path,\n            original_title,\n            title,\n            genres,\n            release_date,\n            vote_average,\n            id,\n          }) => {\n            const genres_ids = genres.map(genre => genre.id);\n            return prepareGalleryInfo(\n              poster_path,\n              backdrop_path,\n              original_title,\n              title,\n              genres_ids,\n              release_date,\n              vote_average,\n              id,\n              findGenres\n            );\n          }\n        )\n        .join('');\n      galleryRef.innerHTML = markup;\n    });\n  }\n}\n\nqueueBtn.addEventListener('click', onQueueBtnClick);\n","export function saveToLS(key, value) {\n   try {\n      const serializedState = JSON.stringify(value);\n      localStorage.setItem(key, serializedState);\n   } catch (error) {\n     console.error(\"Set state error: \", error.message);\n   }\n };\n \n export function loadFromLS(key) {\n   try {\n     const serializedState = localStorage.getItem(key);\n     return serializedState === null ? undefined : JSON.parse(serializedState);\n   } catch (error) {\n     console.error(\"Get state error: \", error.message);\n   }\n };","module.exports = require('./helpers/bundle-url').getBundleURL('9zafZ') + require('./helpers/bundle-manifest').resolve(\"hyIe0\");"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$l4BJK","$e7d516b79a7de1a6$export$6ffe6b83d6e92153","key","serializedState","localStorage","getItem","undefined","error","console","message","$e5c76388b5223ff9$var$watchedBtn","document","querySelector","$e5c76388b5223ff9$var$queueBtn","addEventListener","e","target","classList","contains","toggle","$18b9c66367d8b393$exports","getBundleURL","resolve","$e5c76388b5223ff9$var$noImgCollectionUrl","URL","$e5c76388b5223ff9$var$emptyCollectionMarkup","markupcollection","pathname","$7Sf3J","galleryRef","innerHTML","add","$e5c76388b5223ff9$var$LOCALSTORAGE_KEY_WATCHED","$e5c76388b5223ff9$var$onWatchedBtnClick","arrayFromLSWatch","remove","filmPromisesWatch","map","fetchMovie","Promise","all","then","results","markup","poster_path","backdrop_path","original_title","title","genres","release_date","vote_average","genres_ids","genre","$bQ26w","prepareGalleryInfo","$6nH8Q","findGenres","join","$e5c76388b5223ff9$var$LOCALSTORAGE_KEY_QUEUE","arrayFromLSQueue","filmPromisesQueue"],"version":3,"file":"library.78a22cbd.js.map"}